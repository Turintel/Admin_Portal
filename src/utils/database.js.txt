const Datastore = require('nedb');

// Create a persistent database instance
const db = new Datastore({ filename: 'src/data/database.db', autoload: true });

// Function to insert data into the database
function insertData(data) {
  db.insert(data, (err, doc) => {
    if (err) {
      console.error('Error inserting data:', err);
    } else {
      console.log('Data inserted successfully:', doc);
    }
  });
}

// Function to retrieve all data from the database
function fetchData(callback) {
  db.find({}, (err, docs) => {
    if (err) {
      console.error('Error fetching data:', err);
    } else {
      callback(docs);
    }
  });
}

// Export the database and functions
module.exports = {
  insertData,
  fetchData,
};